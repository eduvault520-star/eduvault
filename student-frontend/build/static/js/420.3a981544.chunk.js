"use strict";(self.webpackChunkeduvault_student_frontend=self.webpackChunkeduvault_student_frontend||[]).push([[420],{7420:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Re});var r=n(45),a=n(8),o=n(9950),i=n(4857),l=n(899),s=n(9925),c=n(2046),d=n(5979),p=n(3788),u=n(6101),m=n(3266),x=n(5333),h=n(6491),v=n(6157),A=n(2235),b=n(7497),f=n(2053),y=n(8587),j=n(8168),S=n(2004),g=n(8465),L=n(8463),w=n(9254),C=n(1763),N=n(423);function P(e){return(0,N.Ay)("MuiStepper",e)}(0,C.A)("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);var M=n(1676);const I=o.createContext({});const R=I,z=o.createContext({});const k=z;function W(e){return(0,N.Ay)("MuiStepConnector",e)}(0,C.A)("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);var q=n(4414);const _=["className"],E=(0,w.Ay)("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})(e=>{let{ownerState:t}=e;return(0,j.A)({flex:"1 1 auto"},"vertical"===t.orientation&&{marginLeft:12},t.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})}),T=(0,w.Ay)("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.line,t["line".concat((0,M.A)(n.orientation))]]}})(e=>{let{ownerState:t,theme:n}=e;const r="light"===n.palette.mode?n.palette.grey[400]:n.palette.grey[600];return(0,j.A)({display:"block",borderColor:n.vars?n.vars.palette.StepConnector.border:r},"horizontal"===t.orientation&&{borderTopStyle:"solid",borderTopWidth:1},"vertical"===t.orientation&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),F=o.forwardRef(function(e,t){const n=(0,L.b)({props:e,name:"MuiStepConnector"}),{className:r}=n,a=(0,y.A)(n,_),{alternativeLabel:i,orientation:l="horizontal"}=o.useContext(R),{active:s,disabled:c,completed:d}=o.useContext(k),p=(0,j.A)({},n,{alternativeLabel:i,orientation:l,active:s,completed:d,disabled:c}),u=(e=>{const{classes:t,orientation:n,alternativeLabel:r,active:a,completed:o,disabled:i}=e,l={root:["root",n,r&&"alternativeLabel",a&&"active",o&&"completed",i&&"disabled"],line:["line","line".concat((0,M.A)(n))]};return(0,g.A)(l,W,t)})(p);return(0,q.jsx)(E,(0,j.A)({className:(0,S.A)(u.root,r),ref:t,ownerState:p},a,{children:(0,q.jsx)(T,{className:u.line,ownerState:p})}))}),B=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],D=(0,w.Ay)("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.nonLinear&&t.nonLinear]}})(e=>{let{ownerState:t}=e;return(0,j.A)({display:"flex"},"horizontal"===t.orientation&&{flexDirection:"row",alignItems:"center"},"vertical"===t.orientation&&{flexDirection:"column"},t.alternativeLabel&&{alignItems:"flex-start"})}),O=(0,q.jsx)(F,{}),H=o.forwardRef(function(e,t){const n=(0,L.b)({props:e,name:"MuiStepper"}),{activeStep:r=0,alternativeLabel:a=!1,children:i,className:l,component:s="div",connector:c=O,nonLinear:d=!1,orientation:p="horizontal"}=n,u=(0,y.A)(n,B),m=(0,j.A)({},n,{nonLinear:d,alternativeLabel:a,orientation:p,component:s}),x=(e=>{const{orientation:t,nonLinear:n,alternativeLabel:r,classes:a}=e,o={root:["root",t,n&&"nonLinear",r&&"alternativeLabel"]};return(0,g.A)(o,P,a)})(m),h=o.Children.toArray(i).filter(Boolean),v=h.map((e,t)=>o.cloneElement(e,(0,j.A)({index:t,last:t+1===h.length},e.props))),A=o.useMemo(()=>({activeStep:r,alternativeLabel:a,connector:c,nonLinear:d,orientation:p}),[r,a,c,d,p]);return(0,q.jsx)(R.Provider,{value:A,children:(0,q.jsx)(D,(0,j.A)({as:s,ownerState:m,className:(0,S.A)(x.root,l),ref:t},u,{children:v}))})});function Y(e){return(0,N.Ay)("MuiStep",e)}(0,C.A)("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const V=["active","children","className","component","completed","disabled","expanded","index","last"],J=(0,w.Ay)("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})(e=>{let{ownerState:t}=e;return(0,j.A)({},"horizontal"===t.orientation&&{paddingLeft:8,paddingRight:8},t.alternativeLabel&&{flex:1,position:"relative"})}),X=o.forwardRef(function(e,t){const n=(0,L.b)({props:e,name:"MuiStep"}),{active:r,children:a,className:i,component:l="div",completed:s,disabled:c,expanded:d=!1,index:p,last:u}=n,m=(0,y.A)(n,V),{activeStep:x,connector:h,alternativeLabel:v,orientation:A,nonLinear:b}=o.useContext(R);let[f=!1,w=!1,C=!1]=[r,s,c];x===p?f=void 0===r||r:!b&&x>p?w=void 0===s||s:!b&&x<p&&(C=void 0===c||c);const N=o.useMemo(()=>({index:p,last:u,expanded:d,icon:p+1,active:f,completed:w,disabled:C}),[p,u,d,f,w,C]),P=(0,j.A)({},n,{active:f,orientation:A,alternativeLabel:v,completed:w,disabled:C,expanded:d,component:l}),M=(e=>{const{classes:t,orientation:n,alternativeLabel:r,completed:a}=e,o={root:["root",n,r&&"alternativeLabel",a&&"completed"]};return(0,g.A)(o,Y,t)})(P),I=(0,q.jsxs)(J,(0,j.A)({as:l,className:(0,S.A)(M.root,i),ref:t,ownerState:P},m,{children:[h&&v&&0!==p?h:null,a]}));return(0,q.jsx)(k.Provider,{value:N,children:h&&!v&&0!==p?(0,q.jsxs)(o.Fragment,{children:[h,I]}):I})});var Z=n(5471);const G=(0,Z.A)((0,q.jsx)("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),K=(0,Z.A)((0,q.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");var Q=n(9360);function U(e){return(0,N.Ay)("MuiStepIcon",e)}const $=(0,C.A)("MuiStepIcon",["root","active","completed","error","text"]);var ee;const te=["active","className","completed","error","icon"],ne=(0,w.Ay)(Q.A,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(e=>{let{theme:t}=e;return{display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),color:(t.vars||t).palette.text.disabled,["&.".concat($.completed)]:{color:(t.vars||t).palette.primary.main},["&.".concat($.active)]:{color:(t.vars||t).palette.primary.main},["&.".concat($.error)]:{color:(t.vars||t).palette.error.main}}}),re=(0,w.Ay)("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})(e=>{let{theme:t}=e;return{fill:(t.vars||t).palette.primary.contrastText,fontSize:t.typography.caption.fontSize,fontFamily:t.typography.fontFamily}}),ae=o.forwardRef(function(e,t){const n=(0,L.b)({props:e,name:"MuiStepIcon"}),{active:r=!1,className:a,completed:o=!1,error:i=!1,icon:l}=n,s=(0,y.A)(n,te),c=(0,j.A)({},n,{active:r,completed:o,error:i}),d=(e=>{const{classes:t,active:n,completed:r,error:a}=e,o={root:["root",n&&"active",r&&"completed",a&&"error"],text:["text"]};return(0,g.A)(o,U,t)})(c);if("number"===typeof l||"string"===typeof l){const e=(0,S.A)(a,d.root);return i?(0,q.jsx)(ne,(0,j.A)({as:K,className:e,ref:t,ownerState:c},s)):o?(0,q.jsx)(ne,(0,j.A)({as:G,className:e,ref:t,ownerState:c},s)):(0,q.jsxs)(ne,(0,j.A)({className:e,ref:t,ownerState:c},s,{children:[ee||(ee=(0,q.jsx)("circle",{cx:"12",cy:"12",r:"12"})),(0,q.jsx)(re,{className:d.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:c,children:l})]}))}return l});function oe(e){return(0,N.Ay)("MuiStepLabel",e)}const ie=(0,C.A)("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),le=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],se=(0,w.Ay)("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation]]}})(e=>{let{ownerState:t}=e;return(0,j.A)({display:"flex",alignItems:"center",["&.".concat(ie.alternativeLabel)]:{flexDirection:"column"},["&.".concat(ie.disabled)]:{cursor:"default"}},"vertical"===t.orientation&&{textAlign:"left",padding:"8px 0"})}),ce=(0,w.Ay)("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})(e=>{let{theme:t}=e;return(0,j.A)({},t.typography.body2,{display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),["&.".concat(ie.active)]:{color:(t.vars||t).palette.text.primary,fontWeight:500},["&.".concat(ie.completed)]:{color:(t.vars||t).palette.text.primary,fontWeight:500},["&.".concat(ie.alternativeLabel)]:{marginTop:16},["&.".concat(ie.error)]:{color:(t.vars||t).palette.error.main}})}),de=(0,w.Ay)("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,["&.".concat(ie.alternativeLabel)]:{paddingRight:0}})),pe=(0,w.Ay)("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(e=>{let{theme:t}=e;return{width:"100%",color:(t.vars||t).palette.text.secondary,["&.".concat(ie.alternativeLabel)]:{textAlign:"center"}}}),ue=o.forwardRef(function(e,t){var n;const r=(0,L.b)({props:e,name:"MuiStepLabel"}),{children:a,className:i,componentsProps:l={},error:s=!1,icon:c,optional:d,slotProps:p={},StepIconComponent:u,StepIconProps:m}=r,x=(0,y.A)(r,le),{alternativeLabel:h,orientation:v}=o.useContext(R),{active:A,disabled:b,completed:f,icon:w}=o.useContext(k),C=c||w;let N=u;C&&!N&&(N=ae);const P=(0,j.A)({},r,{active:A,alternativeLabel:h,completed:f,disabled:b,error:s,orientation:v}),M=(e=>{const{classes:t,orientation:n,active:r,completed:a,error:o,disabled:i,alternativeLabel:l}=e,s={root:["root",n,o&&"error",i&&"disabled",l&&"alternativeLabel"],label:["label",r&&"active",a&&"completed",o&&"error",i&&"disabled",l&&"alternativeLabel"],iconContainer:["iconContainer",r&&"active",a&&"completed",o&&"error",i&&"disabled",l&&"alternativeLabel"],labelContainer:["labelContainer",l&&"alternativeLabel"]};return(0,g.A)(s,oe,t)})(P),I=null!=(n=p.label)?n:l.label;return(0,q.jsxs)(se,(0,j.A)({className:(0,S.A)(M.root,i),ref:t,ownerState:P},x,{children:[C||N?(0,q.jsx)(de,{className:M.iconContainer,ownerState:P,children:(0,q.jsx)(N,(0,j.A)({completed:f,active:A,error:s,icon:C},m))}):null,(0,q.jsxs)(pe,{className:M.labelContainer,ownerState:P,children:[a?(0,q.jsx)(ce,(0,j.A)({ownerState:P},I,{className:(0,S.A)(M.label,null==I?void 0:I.className),children:a})):null,d]})]}))});ue.muiName="StepLabel";const me=ue;var xe=n(3174),he=n(226),ve=n(6639),Ae=n(6080),be=n(294),fe=n(4987),ye=n(2015),je=n(2092),Se=n(2714),ge=n(8179),Le=n(6163),we=n(9723),Ce=n(8429),Ne=n(2074),Pe=n(1543),Me=n(5926);const Ie=["confirmPassword"],Re=()=>{var e;const t=(0,i.A)(),n=(0,Ce.Zp)(),y=(0,Ce.zy)(),{register:j,loading:S,error:g,clearError:L}=(0,Pe.A)(),[w,C]=(0,o.useState)(0),[N,P]=(0,o.useState)([]),[M,I]=(0,o.useState)([]),[R,z]=(0,o.useState)(!1),[k,W]=(0,o.useState)(!1),[_,E]=(0,o.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",confirmPassword:"",institution:(null===(e=y.state)||void 0===e?void 0:e.institutionId)||"",course:"",yearOfStudy:""}),T=["Personal Info","Academic Info","Account Setup"];(0,o.useEffect)(()=>{F()},[]),(0,o.useEffect)(()=>{_.institution&&B(_.institution)},[_.institution]);const F=async()=>{try{const e=await Me.A.get("/api/institutions");P(e.data.institutions)}catch(g){console.error("Error fetching institutions:",g)}},B=async e=>{try{const t=await Me.A.get("/api/courses?institution=".concat(e));I(t.data.courses)}catch(g){console.error("Error fetching courses:",g)}},D=e=>{E((0,a.A)((0,a.A)({},_),{},{[e.target.name]:e.target.value})),g&&L()},O=e=>{switch(e){case 0:return _.firstName&&_.lastName&&_.phoneNumber;case 1:return _.institution&&_.course&&_.yearOfStudy;case 2:return _.email&&_.password&&_.confirmPassword&&_.password===_.confirmPassword;default:return!1}};return(0,q.jsx)(h.A,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, ".concat(t.palette.primary.main," 0%, ").concat(t.palette.primary.dark," 100%)"),display:"flex",alignItems:"center",py:4},children:(0,q.jsx)(v.A,{maxWidth:"md",children:(0,q.jsx)(we.P.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},children:(0,q.jsxs)(A.A,{elevation:24,sx:{p:4,borderRadius:3,bgcolor:(0,b.X4)(t.palette.background.paper,.95),backdropFilter:"blur(10px)"},children:[(0,q.jsxs)(h.A,{textAlign:"center",mb:4,children:[(0,q.jsx)(h.A,{sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:80,height:80,borderRadius:"50%",bgcolor:t.palette.primary.main,color:"white",mb:2},children:(0,q.jsx)(Le.A,{sx:{fontSize:40}})}),(0,q.jsx)(f.A,{variant:"h4",gutterBottom:!0,sx:{fontWeight:700},children:"Join EduVault"}),(0,q.jsx)(f.A,{variant:"body1",color:"text.secondary",children:"Create your account to access premium educational resources"})]}),(0,q.jsx)(H,{activeStep:w,sx:{mb:4},children:T.map(e=>(0,q.jsx)(X,{children:(0,q.jsx)(me,{children:e})},e))}),g&&(0,q.jsx)(xe.A,{severity:"error",sx:{mb:3},children:g}),(0,q.jsxs)(h.A,{component:"form",onSubmit:async e=>{if(e.preventDefault(),_.password!==_.confirmPassword)return;const{confirmPassword:t}=_,a=(0,r.A)(_,Ie);(await j(a)).success&&n("/")},children:[(e=>{switch(e){case 0:return(0,q.jsxs)(l.Ay,{container:!0,spacing:3,children:[(0,q.jsx)(l.Ay,{item:!0,xs:12,sm:6,children:(0,q.jsx)(s.A,{fullWidth:!0,name:"firstName",label:"First Name",value:_.firstName,onChange:D,required:!0,InputProps:{startAdornment:(0,q.jsx)(c.A,{position:"start",children:(0,q.jsx)(be.A,{color:"action"})})}})}),(0,q.jsx)(l.Ay,{item:!0,xs:12,sm:6,children:(0,q.jsx)(s.A,{fullWidth:!0,name:"lastName",label:"Last Name",value:_.lastName,onChange:D,required:!0,InputProps:{startAdornment:(0,q.jsx)(c.A,{position:"start",children:(0,q.jsx)(be.A,{color:"action"})})}})}),(0,q.jsx)(l.Ay,{item:!0,xs:12,children:(0,q.jsx)(s.A,{fullWidth:!0,name:"phoneNumber",label:"Phone Number",value:_.phoneNumber,onChange:D,required:!0,placeholder:"0700000000",InputProps:{startAdornment:(0,q.jsx)(c.A,{position:"start",children:(0,q.jsx)(fe.A,{color:"action"})})}})})]});case 1:return(0,q.jsxs)(l.Ay,{container:!0,spacing:3,children:[(0,q.jsx)(l.Ay,{item:!0,xs:12,children:(0,q.jsxs)(d.A,{fullWidth:!0,required:!0,children:[(0,q.jsx)(p.A,{children:"Institution"}),(0,q.jsx)(u.A,{name:"institution",value:_.institution,onChange:D,label:"Institution",children:N.map(e=>(0,q.jsxs)(m.A,{value:e._id,children:[e.name," (",e.shortName,")"]},e._id))})]})}),(0,q.jsx)(l.Ay,{item:!0,xs:12,children:(0,q.jsxs)(d.A,{fullWidth:!0,required:!0,disabled:!_.institution,children:[(0,q.jsx)(p.A,{children:"Course"}),(0,q.jsx)(u.A,{name:"course",value:_.course,onChange:D,label:"Course",children:M.map(e=>(0,q.jsxs)(m.A,{value:e._id,children:[e.name," (",e.code,")"]},e._id))})]})}),(0,q.jsx)(l.Ay,{item:!0,xs:12,children:(0,q.jsxs)(d.A,{fullWidth:!0,required:!0,children:[(0,q.jsx)(p.A,{children:"Year of Study"}),(0,q.jsx)(u.A,{name:"yearOfStudy",value:_.yearOfStudy,onChange:D,label:"Year of Study",children:[1,2,3,4,5,6].map(e=>(0,q.jsxs)(m.A,{value:e,children:["Year ",e]},e))})]})})]});case 2:return(0,q.jsxs)(l.Ay,{container:!0,spacing:3,children:[(0,q.jsx)(l.Ay,{item:!0,xs:12,children:(0,q.jsx)(s.A,{fullWidth:!0,name:"email",label:"Email Address",type:"email",value:_.email,onChange:D,required:!0,InputProps:{startAdornment:(0,q.jsx)(c.A,{position:"start",children:(0,q.jsx)(ye.A,{color:"action"})})}})}),(0,q.jsx)(l.Ay,{item:!0,xs:12,children:(0,q.jsx)(s.A,{fullWidth:!0,name:"password",label:"Password",type:R?"text":"password",value:_.password,onChange:D,required:!0,InputProps:{startAdornment:(0,q.jsx)(c.A,{position:"start",children:(0,q.jsx)(je.A,{color:"action"})}),endAdornment:(0,q.jsx)(c.A,{position:"end",children:(0,q.jsx)(x.A,{onClick:()=>z(!R),edge:"end",children:R?(0,q.jsx)(Se.A,{}):(0,q.jsx)(ge.A,{})})})}})}),(0,q.jsx)(l.Ay,{item:!0,xs:12,children:(0,q.jsx)(s.A,{fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:k?"text":"password",value:_.confirmPassword,onChange:D,required:!0,error:_.confirmPassword&&_.password!==_.confirmPassword,helperText:_.confirmPassword&&_.password!==_.confirmPassword?"Passwords do not match":"",InputProps:{startAdornment:(0,q.jsx)(c.A,{position:"start",children:(0,q.jsx)(je.A,{color:"action"})}),endAdornment:(0,q.jsx)(c.A,{position:"end",children:(0,q.jsx)(x.A,{onClick:()=>W(!k),edge:"end",children:k?(0,q.jsx)(Se.A,{}):(0,q.jsx)(ge.A,{})})})}})})]});default:return null}})(w),(0,q.jsxs)(h.A,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[(0,q.jsx)(he.A,{disabled:0===w,onClick:()=>{C(e=>e-1)},variant:"outlined",children:"Back"}),w===T.length-1?(0,q.jsx)(he.A,{type:"submit",variant:"contained",disabled:S||!O(w),sx:{minWidth:120},children:S?(0,q.jsx)(ve.A,{size:24,color:"inherit"}):"Create Account"}):(0,q.jsx)(he.A,{variant:"contained",onClick:()=>{C(e=>e+1)},disabled:!O(w),children:"Next"})]}),(0,q.jsx)(h.A,{textAlign:"center",mt:3,children:(0,q.jsxs)(f.A,{variant:"body2",color:"text.secondary",children:["Already have an account?"," ",(0,q.jsx)(Ae.A,{component:Ne.N_,to:"/login",sx:{fontWeight:600},children:"Sign in here"})]})})]})]})})})})}}}]);